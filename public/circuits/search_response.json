{"noir_version":"1.0.0-beta.9+6abff2f16e1c1314ba30708d1cf032a536de3d19","hash":"2155606159904548659","abi":{"parameters":[{"name":"commitment","type":{"kind":"field"},"visibility":"public"},{"name":"searched_x","type":{"kind":"array","length":5,"type":{"kind":"integer","sign":"unsigned","width":8}},"visibility":"public"},{"name":"searched_y","type":{"kind":"array","length":5,"type":{"kind":"integer","sign":"unsigned","width":8}},"visibility":"public"},{"name":"my_x","type":{"kind":"integer","sign":"unsigned","width":8},"visibility":"private"},{"name":"my_y","type":{"kind":"integer","sign":"unsigned","width":8},"visibility":"private"},{"name":"my_nonce","type":{"kind":"field"},"visibility":"private"}],"return_type":null,"error_types":{"16407765477254731130":{"error_kind":"string","string":"commitment mismatch"},"18064232545167412250":{"error_kind":"string","string":"prey is at a searched position"}}},"bytecode":"H4sIAAAAAAAA/9WaXW4TMRDHZ3ebNF9NgW5ISWhJaGlIaaid3W12BQ+9ChHpIbgHL1wCIXEBJJ64BrdAAhFTG41cNy+ZkeyRVrbGm39+M9mZOIojuDWxvt7qebS+Ej2qq2H5Yocvcfh2HL6aw1d3+HYdvobD13T4Wg5f2+HraB+2SI/XeszEVZ6vFvOVzOQ7Ma+WZSHyYnlVylIWZfF+XmbZqszLRbWsFqKSebaSN0WV3Yhb6yItsaUptkc6r4Di+oPiMfM9NO/quXnd/vp6sL4eWnrGYisHYjuTlPncp+MSOOaE+HOPCPPXJuQ6IMwffg5ts+tIbGeSkhvzppzAKYNuj/Bh4Iq7hxJMpMtarHXC+DuEXI8hzGKl5Ma8fU7gPoPuIfhdrCruQ5RgIl0W1h4jqzHqxhKDn7uAJxBmY6HkxrwDTuABg+4Q/G4sKu4hSjCRLmux7oKfu4CnEGaxUnJj3iNO4CMG3WPwu1hV3McowUS6LKxDRlZj1I0lAT93Ac8gzMZCyY15R5zAIwbdMfjdWFTcY5RgIl3WYm2An7uA5xBmsVJyY94TTuATBt1T8LtYVdynKMFEuiysY0ZWY9SNZQf83AW8gDAbCyU35j3jBD5j0J2A341FxT1BCSbSZS3WJvi5C3gJYRYrJTfmnXICTxl0z8HvYlVxn6MEE+mysE4YWY1RN5Ya+LkLeAVhNhZKbsx7wQl8waA7A78bi4p7hhJMpMtarC3wcxfwGsIsVkpuzHvJCXzJoCvA72JVcePKItJlYZ0xsZoTrMpMY1HfuKqQ9/QcP3exvk+9Rn3Lq0NF5hSr+jnRQvfX0byrxw8fP//+3v/6Ey39P/Ay6Hz79KP95RdeG21Ym25Ym29Ye3PPmvnMmtbYQ+uU/3IY/ZRH/99fvbbhQ2upFWeM1q6JGIyeebZqcNdia83c27D4Ino+abMkjvcydqDHFPlMPv8CHVpiDGIuAAA=","debug_symbols":"ndTBjoMgEAbgd+HsQZgZxb7KZtPQlm5MiBqqTTZN333RGbU99LCcfpWZTwPIQ138afo5tt21v6nD10OdYhtC+3MM/dmNbd+lp49nodbb4xi9T4/Uy3jqGlz03agO3RRCoe4uTEvRbXDdkqOLabQslO8uKRN4bYOfr57F3l1+btVaV9KttWk2gP4hgN4ExCxBl5tA9EmAz4I1JIA1VUZ/bc3aDzrn/VCv/UhZM1DZbQaaMkcAg6sAUGcJ+07IFmgT8nYC1Ps32KzdCPtMZgv1JjRVjoBm3U4a82YSaVtNrOyb8J3u3LmNbyeJ0iaNFkoDB6Y9nYLUoUlRcdQclqNJdvpMU0pqSSOZpHk5DS7lhinDlGHKWKkVC8QCscCwAbCUA1PAFDAFtdSKBWKhWKjZQLOUI1PIFDKFldSKhWKhWFSyQXopJ6aIKWKKSGrFIrFILJqt+d++u9i6U/BygF+n7vxyno+/wzqynvhD7M/+MkU/r9gyltbwDw==","file_map":{"50":{"source":"// ZK Hunt Lite - Search Response Circuit (Batched)\n//\n// Proves that the Prey is NOT at any of the searched tiles (up to 5),\n// without revealing the actual position.\n//\n// Public inputs:\n//   commitment   - Current position commitment\n//   searched_x   - Array of 5 X coordinates being searched (unused slots = 255)\n//   searched_y   - Array of 5 Y coordinates being searched (unused slots = 255)\n//\n// Private inputs:\n//   my_x, my_y, my_nonce - Prey's actual position and blinding factor\n//\n// Constraints:\n//   1. commitment == hash(my_x, my_y, my_nonce)\n//   2. For each i in 0..5: (my_x, my_y) != (searched_x[i], searched_y[i])\n//      Slots with 255 are out of valid range (0-7) so always pass.\n\nfn hash3(a: Field, b: Field, c: Field) -> Field {\n    let state: [Field; 4] = std::hash::poseidon2_permutation([a, b, c, 0], 4);\n    state[0]\n}\n\nfn main(\n    // Public inputs\n    commitment: pub Field,\n    searched_x: pub [u8; 5],\n    searched_y: pub [u8; 5],\n    // Private inputs\n    my_x: u8,\n    my_y: u8,\n    my_nonce: Field,\n) {\n    // 1. Verify commitment matches actual position\n    let computed = hash3(my_x as Field, my_y as Field, my_nonce);\n    assert(commitment == computed, \"commitment mismatch\");\n\n    // 2. Prove position differs from each searched tile\n    for i in 0..5 {\n        let same_x = (my_x == searched_x[i]) as u8;\n        let same_y = (my_y == searched_y[i]) as u8;\n        let both_same = same_x * same_y;\n        assert(both_same == 0, \"prey is at a searched position\");\n    }\n}\n\n#[test]\nfn test_single_search_not_found() {\n    // Prey at (2, 0), hunter searches (3, 0), rest padded with 255\n    let nonce: Field = 12345;\n    let commitment = hash3(2, 0, nonce);\n    main(commitment, [3, 255, 255, 255, 255], [0, 255, 255, 255, 255], 2, 0, nonce);\n}\n\n#[test]\nfn test_multiple_searches_not_found() {\n    // Prey at (2, 3), hunter searches 3 tiles, 2 padded\n    let nonce: Field = 42;\n    let commitment = hash3(2, 3, nonce);\n    main(commitment, [1, 3, 2, 255, 255], [3, 3, 4, 255, 255], 2, 3, nonce);\n}\n\n#[test]\nfn test_five_searches_not_found() {\n    // Prey at (4, 4), all 5 slots used\n    let nonce: Field = 99999;\n    let commitment = hash3(4, 4, nonce);\n    main(commitment, [3, 5, 4, 4, 3], [4, 4, 3, 5, 3], 4, 4, nonce);\n}\n\n#[test]\nfn test_different_y_only() {\n    // Prey at (3, 0), searches (3, 1) - same x, different y\n    let nonce: Field = 12345;\n    let commitment = hash3(3, 0, nonce);\n    main(commitment, [3, 255, 255, 255, 255], [1, 255, 255, 255, 255], 3, 0, nonce);\n}\n\n#[test]\nfn test_all_padded() {\n    // All slots padded (edge case: no tiles to search)\n    let nonce: Field = 12345;\n    let commitment = hash3(2, 0, nonce);\n    main(commitment, [255, 255, 255, 255, 255], [255, 255, 255, 255, 255], 2, 0, nonce);\n}\n\n#[test(should_fail_with = \"prey is at a searched position\")]\nfn test_caught_first_slot() {\n    // Prey at (2, 0), searched at (2, 0) in first slot\n    let nonce: Field = 12345;\n    let commitment = hash3(2, 0, nonce);\n    main(commitment, [2, 255, 255, 255, 255], [0, 255, 255, 255, 255], 2, 0, nonce);\n}\n\n#[test(should_fail_with = \"prey is at a searched position\")]\nfn test_caught_third_slot() {\n    // Prey at (4, 4), caught in the third search slot\n    let nonce: Field = 99999;\n    let commitment = hash3(4, 4, nonce);\n    main(commitment, [3, 5, 4, 255, 255], [4, 4, 4, 255, 255], 4, 4, nonce);\n}\n\n#[test(should_fail_with = \"prey is at a searched position\")]\nfn test_caught_last_slot() {\n    // Prey at (1, 1), caught in the fifth (last) slot\n    let nonce: Field = 77;\n    let commitment = hash3(1, 1, nonce);\n    main(commitment, [0, 2, 0, 1, 1], [0, 0, 1, 0, 1], 1, 1, nonce);\n}\n\n#[test(should_fail_with = \"commitment mismatch\")]\nfn test_invalid_commitment() {\n    let nonce: Field = 12345;\n    let wrong_nonce: Field = 99999;\n    let commitment = hash3(2, 0, nonce);\n    main(commitment, [3, 255, 255, 255, 255], [0, 255, 255, 255, 255], 2, 0, wrong_nonce);\n}\n","path":"/Users/dub/Desktop/caravana/phantom-chase/circuits/search_response/src/main.nr"}},"names":["main"],"brillig_names":["directive_invert"]}